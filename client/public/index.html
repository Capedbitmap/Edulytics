<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lecture Assistant | Intelligent Lecture Transcription & Insights</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Using Font Awesome via CDN for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        /* Base Styles from index.html */
        :root {
            --primary-color: #087f8c; /* Deep Teal */
            --primary-dark: #066a74;
            --primary-light: #e6f2f3;
            --secondary-color: #5aaa95; /* Muted Green */
            --accent-color: #f7b801; /* Gold Accent */
            --text-color: #2d3748; /* Dark Gray */
            --secondary-text: #718096; /* Medium Gray */
            --background-color: #f7fafc; /* Very Light Gray */
            --card-background: #ffffff;
            --border-color: #e2e8f0;
            --shadow-light: rgba(0, 0, 0, 0.05);
            --shadow-medium: rgba(0, 0, 0, 0.1);
            --gradient-start: #e6f2f3;
            --gradient-end: #ffffff;
            --transition-speed: 0.3s;
            --animation-duration: 0.6s;
            --header-height: 70px; /* Consistent header height */
        }

        /* Dark Theme from index.html */
        body.dark-theme {
            --primary-color: #14b8a6;
            --primary-dark: #0f766e;
            --primary-light: #374151;
            --secondary-color: #5eead4;
            --accent-color: #facc15;
            --text-color: #e5e7eb;
            --secondary-text: #9ca3af;
            --background-color: #111827;
            --card-background: #1f2937;
            --border-color: #4b5563;
            --shadow-light: rgba(255, 255, 255, 0.04);
            --shadow-medium: rgba(255, 255, 255, 0.08);
            --gradient-start: #111827;
            --gradient-end: #1f2937;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, var(--gradient-start) 0%, var(--gradient-end) 100%);
            color: var(--text-color);
            line-height: 1.7;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
            transition: background var(--transition-speed), color var(--transition-speed);
        }

        /* Animations from index.html */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideInLeft { from { opacity: 0; transform: translateX(-50px); } to { opacity: 1; transform: translateX(0); } }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* Utilities from index.html */
        .container { width: 90%; max-width: 1200px; margin: 0 auto; padding: 0 15px; }
        .section { padding: 80px 0; overflow: hidden; }
        .section-title { text-align: center; font-size: 2.5rem; font-weight: 700; color: var(--primary-dark); margin-bottom: 15px; /* Animation handled by JS */ }
        .section-subtitle { text-align: center; font-size: 1.1rem; color: var(--secondary-text); max-width: 600px; margin: 0 auto 50px auto; /* Animation handled by JS */ }
        .btn { display: inline-block; padding: 14px 30px; border-radius: 8px; text-decoration: none; font-weight: 600; transition: all var(--transition-speed) ease-out; cursor: pointer; border: 2px solid transparent; text-align: center; box-shadow: 0 4px 15px var(--shadow-light); }
        .btn-primary { background-color: var(--primary-color); color: white; border-color: var(--primary-color); }
        .btn-primary:hover { background-color: var(--primary-dark); border-color: var(--primary-dark); transform: translateY(-3px); box-shadow: 0 6px 20px var(--shadow-medium); }
        .btn-secondary { background-color: var(--card-background); color: var(--primary-color); border-color: var(--primary-color); }
        .btn-secondary:hover { background-color: var(--primary-light); color: var(--primary-dark); border-color: var(--primary-dark); transform: translateY(-3px); box-shadow: 0 6px 20px var(--shadow-light); }

        /* Header from index.html */
        .main-header { background-color: var(--card-background); box-shadow: 0 2px 10px var(--shadow-light); padding: 0; /* Padding handled by container */ position: fixed; /* Changed to fixed */ top: 0; left: 0; width: 100%; z-index: 101; /* Increased z-index */ transition: background-color var(--transition-speed), box-shadow var(--transition-speed), color var(--transition-speed); height: var(--header-height); display: flex; align-items: center; }
        .header-container { display: flex; justify-content: space-between; align-items: center; width: 100%; padding: 0 5%; /* Use percentage padding */ max-width: 1200px; margin: 0 auto; }
        .logo { font-size: 1.8rem; font-weight: 700; color: var(--primary-color); text-decoration: none; display: flex; align-items: center; gap: 10px; transition: transform var(--transition-speed), color var(--transition-speed); }
        .logo i { font-size: 1.2em; }
        .logo:hover { transform: scale(1.03); }
        .header-actions { display: flex; align-items: center; gap: 20px; }
        .nav-links { display: flex; gap: 15px; }
        .nav-link { padding: 8px 16px; border-radius: 6px; text-decoration: none; font-weight: 500; transition: all var(--transition-speed) ease-out; border: 1px solid transparent; }
        .nav-link.student { background-color: var(--primary-light); color: var(--primary-dark); border-color: var(--primary-light); }
        .nav-link.student:hover { background-color: var(--primary-color); color: white; border-color: var(--primary-color); transform: translateY(-2px); }
        .nav-link.instructor { background-color: transparent; color: var(--primary-color); border-color: var(--primary-color); }
        .nav-link.instructor:hover { background-color: var(--primary-color); color: white; transform: translateY(-2px); }
        .theme-toggle-btn { background: none; border: none; color: var(--secondary-text); font-size: 1.4rem; cursor: pointer; padding: 5px; line-height: 1; transition: color var(--transition-speed), transform var(--transition-speed); }
        .theme-toggle-btn:hover { color: var(--primary-color); transform: scale(1.1) rotate(15deg); }
        .theme-toggle-btn .fa-sun { display: none; }
        body.dark-theme .theme-toggle-btn .fa-sun { display: inline-block; }
        body.dark-theme .theme-toggle-btn .fa-moon { display: none; }

        /* Hero Section from index.html */
        .hero { text-align: center; padding: 100px 0; padding-top: calc(100px + var(--header-height)); /* Adjust padding top for fixed header */ position: relative; overflow: hidden; }
        .hero::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-image: radial-gradient(var(--border-color) 1px, transparent 1px); background-size: 20px 20px; opacity: 0.2; z-index: -1; transition: background-image var(--transition-speed); }
        body.dark-theme .hero::before { background-image: radial-gradient(var(--border-color) 0.5px, transparent 0.5px); opacity: 0.1; }
        .hero-content { position: relative; z-index: 1; }
        .hero h1 { font-size: 3.5rem; font-weight: 800; color: var(--primary-dark); margin-bottom: 20px; line-height: 1.2; /* Animation handled by JS */ }
        .hero h1 span { color: var(--secondary-color); }
        .hero p { font-size: 1.2rem; color: var(--secondary-text); max-width: 650px; margin: 0 auto 40px auto; /* Animation handled by JS */ }
        .hero .btn { /* Animation handled by JS */ padding: 16px 35px; font-size: 1.1rem; }

        /* Features Section from index.html */
        #features { background-color: var(--primary-light); }
        .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 40px; }
        .feature-card { background-color: var(--card-background); padding: 35px; border-radius: 12px; box-shadow: 0 8px 25px var(--shadow-light); text-align: center; border: 1px solid var(--border-color); transition: transform var(--transition-speed), box-shadow var(--transition-speed), background-color var(--transition-speed), border-color var(--transition-speed); /* Animation handled by JS */ }
        .feature-card:hover { transform: translateY(-8px); box-shadow: 0 12px 35px var(--shadow-medium); }
        .feature-icon { font-size: 2.8rem; color: var(--primary-color); margin-bottom: 20px; display: inline-block; background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; text-fill-color: transparent; }
        .feature-card h3 { font-size: 1.4rem; font-weight: 600; color: var(--primary-dark); margin-bottom: 10px; transition: color var(--transition-speed); }
        .feature-card p { font-size: 0.95rem; color: var(--secondary-text); line-height: 1.6; transition: color var(--transition-speed); }

        /* --- NEW Scrolling Features Section (from index-test.html, modified) --- */
        #scrolling-features {
            /* margin-top: var(--header-height); */ /* Removed, handled by hero padding */
            padding-top: 80px;
            padding-bottom: 80px;
            position: relative;
            overflow: visible; /* Allow potential overflows if needed, or keep hidden */
        }

        /* Background dimming overlay */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8); /* Increased dimming */
            opacity: 0;
            z-index: 5; /* Below sticky container */
            pointer-events: none;
            transition: opacity 0.5s ease;
        }

        /* Scroll content container */
        .scroll-wrapper {
            /* Height calculated dynamically based on content + viewport */
            position: relative;
        }

        /* Sticky container for the content */
        .scroll-container {
            height: calc(100vh - var(--header-height) - 40px); /* Sticky area height */
            position: sticky;
            top: calc(var(--header-height) + 20px); /* Stick below header with margin */
            /* background-color: var(--card-background); */ /* REMOVED background */
            /* border-radius: 12px; */ /* REMOVED border-radius */
            /* box-shadow: 0 8px 30px var(--shadow-medium); */ /* REMOVED shadow */
            display: flex;
            overflow: visible; /* Allow content to potentially overflow if needed */
            z-index: 10; /* Above overlay */
            width: 100%; /* Ensure it spans width */
            max-width: 1200px; /* Match container width */
            margin: 0 auto; /* Center */
            padding: 0 15px; /* Match container padding */
        }

        /* Progress indicator (optional visual) */
        .progress-indicator {
            position: fixed;
            top: 50%;
            right: 30px;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 20; /* Above everything */
        }
        .progress-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: var(--border-color);
            transition: background-color 0.3s ease, transform 0.3s ease;
            cursor: pointer;
        }
        .progress-dot.active {
            background-color: var(--primary-color);
            transform: scale(1.3);
        }
        body.dark-theme .progress-dot { background-color: var(--border-color); }
        body.dark-theme .progress-dot.active { background-color: var(--primary-color); }


        /* Content layout columns */
        .text-column {
            flex: 1;
            padding-right: 40px; /* Space between text and image */
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .visual-column {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative; /* For absolute positioning of images */
        }

        /* Content sections within columns */
        .scroll-content {
            /* This class groups text/image pairs if needed, but visibility is handled individually */
        }

        /* Text section styling */
        .content-text {
            /* Individual text block */
            opacity: 0; /* Controlled by JS */
            transform: translateY(20px);
            transition: opacity 0.5s ease, transform 0.5s ease;
            position: absolute; /* Stack text blocks */
            width: 100%; /* Take full width of text-column */
        }
        .content-text.visible {
            opacity: 1;
            transform: translateY(0);
            position: relative; /* Allow visible block to take space */
        }
        .content-text h3 {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-dark);
            margin-bottom: 15px;
        }
        .content-text p {
            font-size: 1.1rem;
            color: var(--secondary-text);
        }

        /* Image section styling */
        .content-image {
            max-width: 100%; /* Max width within visual-column */
            max-height: 70vh; /* Limit height */
            object-fit: contain;
            border-radius: 12px;
            /* box-shadow: 0 10px 30px var(--shadow-medium); */ /* Optional shadow on image */
            opacity: 0; /* Controlled by JS */
            transform: scale(0.9);
            transition: opacity 0.5s ease, transform 0.5s ease;
            position: absolute; /* Stack images */
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
        }
        .content-image.visible {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
            position: absolute; /* Keep absolute when visible */
        }

        /* Trigger sections (invisible elements for tracking scroll position) */
        .scroll-triggers {
             position: absolute;
             top: 0;
             left: 0;
             width: 100%;
             height: 100%; /* Cover the entire scroll-wrapper height */
             z-index: -1; /* Behind content */
        }
        .scroll-trigger {
            height: 100vh; /* Each trigger is viewport height */
            width: 100%;
            position: absolute; /* Positioned absolutely within scroll-triggers */
            left: 0;
            /* Top position set by JS */
        }

        /* --- Get Started Section from index.html --- */
        .get-started-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 40px; align-items: stretch; }
        .access-card { background: linear-gradient(145deg, var(--card-background), var(--gradient-start)); padding: 40px; border-radius: 16px; box-shadow: 0 10px 30px var(--shadow-light); border: 1px solid var(--border-color); display: flex; flex-direction: column; justify-content: space-between; text-align: center; transition: transform var(--transition-speed), box-shadow var(--transition-speed), background var(--transition-speed), border-color var(--transition-speed); /* Animation handled by JS */ }
        .access-card:hover { transform: translateY(-8px); box-shadow: 0 15px 40px var(--shadow-medium); }
        .access-card h2 { font-size: 1.8rem; font-weight: 700; color: var(--primary-dark); margin-bottom: 15px; display: flex; align-items: center; justify-content: center; gap: 12px; transition: color var(--transition-speed); }
        .access-card h2 i { color: var(--secondary-color); font-size: 1.2em; transition: color var(--transition-speed); }
        .access-card p { font-size: 1rem; color: var(--secondary-text); margin-bottom: 30px; flex-grow: 1; transition: color var(--transition-speed); }
        .access-card .btn { width: 100%; margin-bottom: 15px; }
        .signup-prompt { font-size: 0.9rem; color: var(--secondary-text); transition: color var(--transition-speed); }
        .signup-prompt a { color: var(--primary-color); font-weight: 600; text-decoration: none; transition: color var(--transition-speed); }
        .signup-prompt a:hover { color: var(--primary-dark); text-decoration: underline; }

        /* --- Footer from index.html --- */
        .main-footer { background-color: var(--primary-light); padding: 40px 0; text-align: center; margin-top: auto; color: var(--secondary-text); font-size: 0.9rem; border-top: 1px solid var(--border-color); transition: background-color var(--transition-speed), color var(--transition-speed), border-color var(--transition-speed); }

        /* --- Loading Overlay from index.html --- */
        .loading-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(247, 250, 252, 0.9); z-index: 1000; justify-content: center; align-items: center; transition: background-color var(--transition-speed); }
        body.dark-theme .loading-overlay { background-color: rgba(17, 24, 39, 0.9); }
        .loading-spinner { width: 60px; height: 60px; border: 6px solid var(--primary-light); border-top-color: var(--primary-color); border-radius: 50%; animation: spin 1s linear infinite; transition: border-color var(--transition-speed); }

        /* --- Responsive Design --- */
        @media (max-width: 992px) {
            /* Keep existing 992px styles for hero, titles etc. */
            .hero h1 { font-size: 3rem; }
            .hero p { font-size: 1.1rem; }
            .section-title { font-size: 2.2rem; }

            /* Tablet styles for scroll section (from test file) */
             .scroll-container {
                flex-direction: column;
                height: auto; /* Let content determine height */
                position: relative; /* Not sticky on tablet */
                top: 0;
                padding: 30px;
                /* Re-add background/shadow for non-sticky view */
                 background-color: var(--card-background);
                 border-radius: 12px;
                 box-shadow: 0 8px 30px var(--shadow-medium);
            }
             .text-column { padding-right: 0; padding-bottom: 30px; }
             .visual-column { min-height: 40vh; }
             .content-text, .content-image { position: relative; transform: none; opacity: 1; } /* Show all */
             .content-image { position: relative; transform: translate(0, 0) scale(1); } /* Reset absolute positioning */
             .scroll-wrapper { height: auto !important; } /* Override JS height */
             .scroll-triggers, .progress-indicator, .overlay { display: none; } /* Hide JS elements */
             #scrolling-features { height: auto; } /* Override section height */
        }

        @media (max-width: 768px) {
            /* Keep existing 768px styles */
            .header-container { flex-direction: column; gap: 15px; }
            .header-actions { width: 100%; justify-content: space-between; }
            .nav-links { justify-content: center; }
            .hero { padding: 80px 0; padding-top: calc(80px + var(--header-height)); }
            .hero h1 { font-size: 2.5rem; }
            .hero p { font-size: 1rem; }
            .section { padding: 60px 0; }
            .section-title { font-size: 2rem; }
            .section-subtitle { margin-bottom: 40px; }
            .features-grid { gap: 30px; }
            .get-started-grid { gap: 30px; }
            .access-card { padding: 30px; }

            /* Mobile styles for scroll section (from test file, adapted) */
            .scroll-container {
                flex-direction: column;
                height: auto;
                position: relative;
                top: 0;
                padding: 20px;
                background-color: transparent; /* No background */
                box-shadow: none; /* No shadow */
                border-radius: 0;
            }
            .text-column { padding-right: 0; padding-bottom: 20px; }
            .visual-column { min-height: 30vh; }
            .content-text, .content-image { position: relative; transform: none; opacity: 1; }
            .content-image { position: relative; transform: translate(0, 0) scale(1); max-width: 90%; margin: 0 auto; }
            .scroll-wrapper { height: auto !important; }
            .scroll-triggers, .progress-indicator, .overlay { display: none; }
            #scrolling-features { height: auto; padding: 60px 0; } /* Adjust padding */
            .scroll-text-item h3 { font-size: 1.5rem; }
            .scroll-text-item p { font-size: 0.95rem; }
        }

        @media (max-width: 576px) {
            /* Keep existing 576px styles */
            body { font-size: 15px; }
            .header-actions { flex-wrap: wrap; justify-content: center; gap: 10px; }
            .nav-links { gap: 10px; flex-wrap: wrap; justify-content: center; }
            .nav-link { padding: 6px 12px; font-size: 0.9rem; }
            .hero { padding: 60px 0; padding-top: calc(60px + var(--header-height)); }
            .hero h1 { font-size: 2rem; }
            .hero p { max-width: 90%; }
            .btn { padding: 12px 25px; font-size: 0.95rem; }
            .feature-card { padding: 25px; }
            .feature-icon { font-size: 2.5rem; }
            .feature-card h3 { font-size: 1.2rem; }
            .access-card h2 { font-size: 1.5rem; }
            .main-footer { padding: 30px 0; }
        }
    </style>
</head>
<body>
    <header class="main-header">
        <div class="container header-container">
            <a href="/" class="logo">
                <i class="fas fa-microphone-alt"></i>
                <span>Lecture Assistant</span>
            </a>
            <div class="header-actions">
                <nav class="nav-links">
                    <a href="/student/login" class="nav-link student">Student Login</a>
                    <a href="/instructor/login" class="nav-link instructor">Instructor Login</a>
                </nav>
                <button id="theme-toggle" class="theme-toggle-btn" aria-label="Toggle dark mode">
                    <i class="fas fa-moon"></i>
                    <i class="fas fa-sun"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Background overlay for dimming effect -->
    <div class="overlay" id="dimming-overlay"></div>

    <main>
        <section class="hero">
            <div class="container hero-content">
                <h1>Unlock Lecture Insights, <span>Instantly</span></h1>
                <p>Your intelligent assistant for real-time transcription, AI-powered explanations, and searchable lecture archives. Focus on learning, not just note-taking.</p>
                <a href="#get-started" class="btn btn-primary">Get Started Now</a>
            </div>
        </section>

        <section id="features" class="section">
            <div class="container">
                <h2 class="section-title">Why Choose Lecture Assistant?</h2>
                <p class="section-subtitle">Experience lectures like never before with tools designed for comprehension and accessibility.</p>
                <div class="features-grid">
                    <div class="feature-card">
                        <span class="feature-icon">⏱️</span>
                        <h3>Real-time Transcription</h3>
                        <p>Get accurate, live transcriptions of your lectures as they happen. Never miss a key point again.</p>
                    </div>
                    <div class="feature-card">
                        <span class="feature-icon">💡</span>
                        <h3>AI-Powered Explanations</h3>
                        <p>Stuck on a complex topic? Get instant, AI-generated explanations tailored to the lecture context.</p>
                    </div>
                    <div class="feature-card">
                        <span class="feature-icon">🔍</span>
                        <h3>Searchable Archive</h3>
                        <p>Easily search through past lectures to find specific information, definitions, or discussions.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- NEW Scrolling Features Section -->
        <section id="scrolling-features" class="section">
             <div class="container"> <!-- Added container for centering title/subtitle -->
                <h2 class="section-title">Explore the Possibilities</h2>
                <p class="section-subtitle">See how Lecture Assistant transforms your learning experience.</p>
            </div>

             <!-- Invisible dots for progress indication -->
             <div class="progress-indicator">
                 <div class="progress-dot" data-index="0"></div>
                 <div class="progress-dot" data-index="1"></div>
                 <div class="progress-dot" data-index="2"></div>
                 <div class="progress-dot" data-index="3"></div>
             </div>

             <!-- This wrapper contains both trigger elements and sticky content -->
             <div class="scroll-wrapper" id="scroll-wrapper">
                 <!-- The actual sticky container with content -->
                 <div class="scroll-container">
                     <div class="text-column">
                         <!-- Content text blocks - visibility controlled by JS -->
                         <div class="content-text" data-index="0">
                             <h3>Capture Every Word</h3>
                             <p>Our advanced speech recognition ensures high accuracy, even in noisy environments. Transcripts are available moments after speech.</p>
                         </div>
                         <div class="content-text" data-index="1">
                             <h3>Understand Complex Concepts</h3>
                             <p>Integrated AI provides clear, concise explanations of difficult terms or ideas directly within the transcript context.</p>
                         </div>
                         <div class="content-text" data-index="2">
                             <h3>Find Information Fast</h3>
                             <p>Don't waste time scrubbing through recordings. Search keywords across all your lectures instantly.</p>
                         </div>
                         <div class="content-text" data-index="3">
                             <h3>Collaborate & Share</h3>
                             <p>Easily share transcripts or specific sections with classmates or colleagues (feature coming soon!).</p>
                         </div>
                     </div>
                     <div class="visual-column">
                         <!-- Images - visibility controlled by JS -->
                         <img src="images/scroll-feature-1.png" alt="Real-time transcription interface" class="content-image" data-index="0">
                         <img src="images/scroll-feature-2.png" alt="AI explanation pop-up" class="content-image" data-index="1">
                         <img src="images/scroll-feature-3.png" alt="Search results within lecture archive" class="content-image" data-index="2">
                         <img src="images/scroll-feature-4.png" alt="Collaboration concept graphic" class="content-image" data-index="3">
                     </div>
                 </div>

                 <!-- Invisible trigger elements for scroll detection -->
                 <div class="scroll-triggers" id="scroll-triggers">
                     <div class="scroll-trigger" data-index="0"></div>
                     <div class="scroll-trigger" data-index="1"></div>
                     <div class="scroll-trigger" data-index="2"></div>
                     <div class="scroll-trigger" data-index="3"></div>
                 </div>
             </div>
        </section>

        <section id="get-started" class="section">
            <div class="container">
                <h2 class="section-title">Access Your Dashboard</h2>
                <p class="section-subtitle">Log in or sign up based on your role to start leveraging the power of Lecture Assistant.</p>
                <div class="get-started-grid">
                    <div class="access-card">
                        <div>
                            <h2><i class="fas fa-user-graduate"></i> Student Access</h2>
                            <p>Log in with your student credentials to view live lectures, access transcriptions, and utilize AI explanation features.</p>
                        </div>
                        <div>
                            <a href="/student/login" class="btn btn-primary">Student Login</a>
                            <p class="signup-prompt">New student? <a href="/student/signup">Sign up here</a></p>
                        </div>
                    </div>
                    <div class="access-card">
                        <div>
                            <h2><i class="fas fa-chalkboard-teacher"></i> Instructor Access</h2>
                            <p>Manage your courses, start new lecture sessions, and view engagement analytics through the instructor portal.</p>
                        </div>
                        <div>
                            <a href="/instructor/login" class="btn btn-secondary">Instructor Login</a>
                            <p class="signup-prompt">New instructor? <a href="/instructor/signup">Sign up here</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="main-footer">
        <div class="container">
            <p>&copy; 2025 Lecture Assistant | All Rights Reserved</p>
        </div>
    </footer>

    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-spinner"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Initial Fade-in Animations ---
            const animatedElements = document.querySelectorAll('.section-title, .section-subtitle, .feature-card, .access-card, .hero h1, .hero p, .hero .btn');
            const initialObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        // Add a class to trigger animation defined in CSS if needed
                        // entry.target.classList.add('fade-in-visible');
                        // Or just set opacity
                         entry.target.style.opacity = '1';
                        initialObserver.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });

            animatedElements.forEach(el => {
                el.style.opacity = '0'; // Start hidden
                initialObserver.observe(el);
            });

            // --- Smooth Scroll for Hero Button ---
            const heroButton = document.querySelector('.hero .btn[href="#get-started"]');
            if (heroButton) {
                heroButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetElement = document.querySelector('#get-started');
                    if (targetElement) {
                        targetElement.scrollIntoView({ behavior: 'smooth' });
                    }
                });
            }

            // --- Theme Toggle ---
            const themeToggle = document.getElementById('theme-toggle');
            const currentTheme = localStorage.getItem('theme');
            if (currentTheme === 'dark') {
                document.body.classList.add('dark-theme');
            }
            themeToggle?.addEventListener('click', () => {
                document.body.classList.toggle('dark-theme');
                let theme = document.body.classList.contains('dark-theme') ? 'dark' : 'light';
                localStorage.setItem('theme', theme);
            });

            // --- NEW Scrolling Features Animation (from index-test.html) ---
            const scrollFeatureSection = document.getElementById('scrolling-features');
            const scrollWrapper = document.getElementById('scroll-wrapper');
            const scrollContainer = scrollFeatureSection?.querySelector('.scroll-container');
            const scrollTriggers = scrollFeatureSection?.querySelectorAll('.scroll-trigger');
            const contentTexts = scrollFeatureSection?.querySelectorAll('.content-text');
            const contentImages = scrollFeatureSection?.querySelectorAll('.content-image');
            const progressDots = scrollFeatureSection?.querySelectorAll('.progress-dot');
            const overlay = document.getElementById('dimming-overlay');

            // Check if all required elements exist
            if (!scrollWrapper || !scrollContainer || !scrollTriggers || !contentTexts || !contentImages || !progressDots || !overlay) {
                console.error("Scrolling feature elements not found. Aborting setup.");
                return;
            }

            let headerHeight = 70; // Default, will recalculate

            // Group content elements by index for easier access
            const textGroups = {};
            contentTexts.forEach(text => textGroups[text.getAttribute('data-index')] = text);
            const imageGroups = {};
            contentImages.forEach(img => imageGroups[img.getAttribute('data-index')] = img);

            // Set initial wrapper height and trigger positions
            function setScrollHeight() {
                if (window.innerWidth > 768) { // Only run on non-mobile
                    const header = document.querySelector('.main-header');
                    headerHeight = header ? header.offsetHeight : 70;
                    const triggerHeight = window.innerHeight; // Each trigger section is viewport height
                    const totalTriggers = scrollTriggers.length;
                    const wrapperHeight = triggerHeight * totalTriggers;
                    scrollWrapper.style.height = `${wrapperHeight}px`;

                    scrollTriggers.forEach((trigger, index) => {
                        trigger.style.position = 'absolute';
                        trigger.style.top = `${index * triggerHeight}px`;
                        trigger.style.height = `${triggerHeight}px`;
                        trigger.style.width = '100%'; // Ensure full width
                    });
                } else {
                    // Reset height on mobile if needed
                    scrollWrapper.style.height = 'auto';
                }
            }

            // Update active content based on index
            function updateActiveContent(activeIndex) {
                // Update text visibility
                Object.entries(textGroups).forEach(([index, textEl]) => {
                    textEl.classList.toggle('visible', index === activeIndex);
                });
                // Update image visibility
                Object.entries(imageGroups).forEach(([index, imgEl]) => {
                    imgEl.classList.toggle('visible', index === activeIndex);
                });
                // Update progress dots
                progressDots.forEach(dot => {
                    dot.classList.toggle('active', dot.getAttribute('data-index') === activeIndex);
                });
            }

            // Set up Intersection Observer for triggers
            const triggerOptions = {
                root: null, // Use viewport
                rootMargin: `-${headerHeight + 40}px 0px -${window.innerHeight - headerHeight - 60}px 0px`, // Trigger roughly in the middle of the sticky area
                threshold: 0 // Trigger as soon as it enters the margin
            };

            const triggerObserver = new IntersectionObserver((entries) => {
                 if (window.innerWidth <= 768) return; // Don't observe on mobile

                let intersectingEntry = null;
                // Find the entry that is most 'intersecting' or the first one if multiple are
                 entries.forEach(entry => {
                     if (entry.isIntersecting) {
                         if (!intersectingEntry || entry.intersectionRatio > intersectingEntry.intersectionRatio) {
                             intersectingEntry = entry;
                         }
                     }
                 });

                 if (intersectingEntry) {
                     const index = intersectingEntry.target.getAttribute('data-index');
                     updateActiveContent(index);
                 }

            }, triggerOptions);

            // Set up observer for sticky container visibility (for dimming)
            const containerOptions = {
                root: null,
                rootMargin: '0px',
                threshold: Array.from({ length: 21 }, (_, i) => i * 0.05) // Fine-grained thresholds
            };

            const containerObserver = new IntersectionObserver((entries) => {
                 if (window.innerWidth <= 768) {
                     overlay.style.opacity = 0; // Ensure overlay is hidden on mobile
                     return;
                 }
                entries.forEach(entry => {
                    // Dim based on how much of the *sticky container* is visible
                    // Fade in dimming as it sticks, fade out as it unsticks
                    const ratio = entry.intersectionRatio;
                    // Check if it's actually sticky (top near header height)
                    const containerRect = scrollContainer.getBoundingClientRect();
                    const isLikelySticky = Math.abs(containerRect.top - headerHeight) < 10;

                    if (isLikelySticky) {
                         // Fade in based on how much is visible, max out quickly
                         overlay.style.opacity = Math.min(1, ratio * 2) * 0.8; // Target 0.8 opacity
                    } else if (containerRect.top > headerHeight) {
                         // Above sticky position, fade out
                         overlay.style.opacity = 0;
                    } else {
                         // Below sticky position (scrolled past), fade based on visibility
                         overlay.style.opacity = Math.max(0, ratio - 0.1) * 0.8; // Fade out more slowly
                    }
                });
            }, containerOptions);

            // Initialize observers and calculations
            if (window.innerWidth > 768) {
                scrollTriggers.forEach(trigger => triggerObserver.observe(trigger));
                containerObserver.observe(scrollContainer);
            }

            // Handle clicking on progress dots
            progressDots.forEach(dot => {
                dot.addEventListener('click', () => {
                    if (window.innerWidth <= 768) return; // Disable on mobile
                    const index = parseInt(dot.getAttribute('data-index'), 10);
                    // Calculate target scroll position: top of wrapper + index * viewport height
                    const wrapperTop = scrollWrapper.offsetTop;
                    const targetScrollY = wrapperTop + (index * window.innerHeight);

                    window.scrollTo({
                        top: targetScrollY - headerHeight, // Adjust for fixed header
                        behavior: 'smooth'
                    });
                });
            });

            // Debounced resize handler
            let resizeTimeout;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(() => {
                    setScrollHeight();
                    // Re-observe if needed, especially if switching between mobile/desktop
                    triggerObserver.disconnect();
                    containerObserver.disconnect();
                    if (window.innerWidth > 768) {
                         scrollTriggers.forEach(trigger => triggerObserver.observe(trigger));
                         containerObserver.observe(scrollContainer);
                    } else {
                         // Reset mobile state
                         overlay.style.opacity = 0;
                         contentTexts.forEach(t => t.classList.add('visible')); // Show all text on mobile
                         contentImages.forEach(i => i.classList.add('visible')); // Show all images on mobile
                    }
                }, 150);
            });

            // Initial setup
            setScrollHeight();
            updateActiveContent('0'); // Start with first item active

            // Initial mobile state check
            if (window.innerWidth <= 768) {
                 contentTexts.forEach(t => t.classList.add('visible'));
                 contentImages.forEach(i => i.classList.add('visible'));
            }

        }); // End DOMContentLoaded
    </script>
</body>
</html>