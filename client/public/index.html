<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduLytics | Intelligent Lecture Transcription & Insights</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Using Font Awesome via CDN for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="/styles/animations.css">
    <link rel="stylesheet" href="/styles/advanced-effects.css">
    <link rel="stylesheet" href="/styles/main.css.additions">
    
    <!-- GSAP for advanced animations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
</head>
<body>
    
    <!-- Floating particles background -->
    <div class="particles-container">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>
    
    <header class="main-header">
        <div class="container header-container">
            <a href="/" class="logo">
                <!-- <i class="fas fa-microphone-alt"></i> -->
                <img src="/images/Abu_Dhabi_University.png" alt="Abu Dhabi University Logo" style="height: 60px; width: auto; margin-right: 10px;">
                <span>EduLytics</span>
            </a>
            <div class="header-actions">
                <nav class="nav-links">
                    <a href="/student/login" class="nav-link student">Student Login</a>
                    <a href="/instructor/login" class="nav-link instructor">Instructor Login</a>
                </nav>
                <button id="theme-toggle" class="theme-toggle-btn" aria-label="Toggle dark mode">
                    <i class="fas fa-moon"></i>
                    <i class="fas fa-sun"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Background overlay for dimming effect -->
    <div class="overlay" id="dimming-overlay"></div>

    <main class="page-transition">
        <section class="hero">
            <div class="container hero-content">
                <h1>Unlock Lecture Insights, <span>Instantly</span></h1>
                <p>Your intelligent assistant for real-time transcription, AI-powered explanations, and searchable lecture archives. Focus on learning, not just note-taking.</p>
                <a href="#get-started" class="btn btn-primary">Get Started Now</a>
            </div>
        </section>

        <section id="features" class="section">
            <div class="container">
                <h2 class="section-title">Why Choose EduLytics?</h2>
                <p class="section-subtitle">Experience lectures like never before with tools designed for comprehension and accessibility.</p>
                <div class="features-grid">
                    <div class="feature-card">
                        <span class="feature-icon">‚è±Ô∏è</span>
                        <h3>Real-time Transcription</h3>
                        <p>Get accurate, live transcriptions of your lectures as they happen. Never miss a key point again.</p>
                    </div>
                    <div class="feature-card">
                        <span class="feature-icon">üí°</span>
                        <h3>AI-Powered Explanations</h3>
                        <p>Stuck on a complex topic? Get instant, AI-generated explanations tailored to the lecture context.</p>
                    </div>
                    <div class="feature-card">
                        <span class="feature-icon">üîç</span>
                        <h3>Searchable Archive</h3>
                        <p>Easily search through past lectures to find specific information, definitions, or discussions.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="scrolling-features" class="section">
            <div class="container">
                <h2 class="section-title">Explore the Possibilities</h2>
                <p class="section-subtitle">See how EduLytics transforms your learning experience.</p>
            </div>

            <div class="progress-indicator">
                <div class="progress-dot" data-index="0"></div>
                <div class="progress-dot" data-index="1"></div>
                <div class="progress-dot" data-index="2"></div>
                <div class="progress-dot" data-index="3"></div>
            </div>

            <div class="scroll-wrapper" id="scroll-wrapper">
                <div class="scroll-container">
                    <div class="text-column">
                        <div class="content-text" data-index="0">
                            <h3>Capture Every Word</h3>
                            <p>Our advanced speech recognition ensures high accuracy, even in noisy environments. Transcripts are available moments after speech.</p>
                        </div>
                        <div class="content-text" data-index="1">
                            <h3>Understand Complex Concepts</h3>
                            <p>Integrated AI provides clear, concise explanations of difficult terms or ideas directly within the transcript context.</p>
                        </div>
                        <div class="content-text" data-index="2">
                            <h3>Find Information Fast</h3>
                            <p>Don't waste time scrubbing through recordings. Search keywords across all your lectures instantly.</p>
                        </div>
                        <div class="content-text" data-index="3">
                            <h3>Collaborate & Share</h3>
                            <p>Easily share transcripts or specific sections with classmates or colleagues (feature coming soon!).</p>
                        </div>
                    </div>
                    <div class="visual-column">
                        <img src="images/scroll-feature-1.png" alt="Real-time transcription interface" class="content-image" data-index="0">
                        <img src="images/scroll-feature-2.png" alt="AI explanation pop-up" class="content-image" data-index="1">
                        <img src="images/scroll-feature-3.png" alt="Search results within lecture archive" class="content-image" data-index="2">
                        <img src="images/scroll-feature-4.png" alt="Collaboration concept graphic" class="content-image" data-index="3">
                    </div>
                </div>

                <div class="scroll-triggers" id="scroll-triggers">
                    <div class="scroll-trigger" data-index="0"></div>
                    <div class="scroll-trigger" data-index="1"></div>
                    <div class="scroll-trigger" data-index="2"></div>
                    <div class="scroll-trigger" data-index="3"></div>
                </div>
            </div>
        </section>

        <section id="get-started" class="section">
            <div class="container">
                <h2 class="section-title">Access Your Dashboard</h2>
                <p class="section-subtitle">Log in or sign up based on your role to start leveraging the power of EduLytics.</p>
                <div class="get-started-grid">
                    <div class="access-card">
                        <div>
                            <h2><i class="fas fa-user-graduate"></i> Student Access</h2>
                            <p>Log in with your student credentials to view live lectures, access transcriptions, and utilize AI explanation features.</p>
                        </div>
                        <div>
                            <a href="/student/login" class="btn btn-primary">Student Login</a>
                            <p class="signup-prompt">New student? <a href="/student/signup">Sign up here</a></p>
                        </div>
                    </div>
                    <div class="access-card">
                        <div>
                            <h2><i class="fas fa-chalkboard-teacher"></i> Instructor Access</h2>
                            <p>Manage your courses, start new lecture sessions, and view engagement analytics through the instructor portal.</p>
                        </div>
                        <div>
                            <a href="/instructor/login" class="btn btn-secondary">Instructor Login</a>
                            <p class="signup-prompt">New instructor? <a href="/instructor/signup">Sign up here</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="main-footer">
        <div class="container">
            <p>&copy; 2025 EduLytics | All Rights Reserved</p>
        </div>
    </footer>

    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-spinner"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Make all elements visible by default, then apply animations ---
            document.querySelectorAll('.section-title, .section-subtitle, .feature-card, .access-card, .hero h1, .hero p, .hero .btn')
                .forEach(el => {
                    // Start visible for better user experience
                    el.style.opacity = '1';
                    el.style.transform = 'translateY(0)';
                });
                
            // --- Apply gentle animations only if preferred ---
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                // --- Initial Fade-in Animations ---
                const animatedElements = document.querySelectorAll('.section-title, .section-subtitle, .feature-card, .access-card, .hero h1, .hero p, .hero .btn');
                
                const initialObserver = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.style.opacity = '1';
                            entry.target.style.transform = 'translateY(0)';
                            initialObserver.unobserve(entry.target);
                        }
                    });
                }, { threshold: 0.1, rootMargin: '0px 0px -10% 0px' });

                animatedElements.forEach(el => {
                    // Apply animation only if element is outside viewport
                    const rect = el.getBoundingClientRect();
                    const isVisible = (
                        rect.top >= 0 &&
                        rect.left >= 0 &&
                        rect.bottom <= window.innerHeight &&
                        rect.right <= window.innerWidth
                    );
                    
                    if (!isVisible) {
                        el.style.opacity = '0';
                        el.style.transform = 'translateY(20px)';
                        el.style.transition = 'opacity 0.6s ease-out, transform 0.6s ease-out';
                        initialObserver.observe(el);
                    }
                    
                    // Safety timeout - make elements visible after 800ms regardless
                    setTimeout(() => {
                        el.style.opacity = '1';
                        el.style.transform = 'translateY(0)';
                    }, 800);
                });
            }
            
            // --- Make feature cards immediately visible ---
            document.querySelectorAll('.feature-card').forEach(card => {
                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
            });
            
            // --- Make access cards immediately visible ---
            document.querySelectorAll('.access-card').forEach(card => {
                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
            });
            
            // --- Ensure Get Started button is visible ---
            const heroButton = document.querySelector('.hero .btn');
            if (heroButton) {
                heroButton.style.opacity = '1';
                heroButton.style.transform = 'translateY(0)';
            }

            // --- Smooth Scroll for Hero Button ---
            const heroButtonScroll = document.querySelector('.hero .btn[href="#get-started"]');
            if (heroButtonScroll) {
                heroButtonScroll.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetElement = document.querySelector('#get-started');
                    if (targetElement) {
                        targetElement.scrollIntoView({ behavior: 'smooth' });
                    }
                });
            }

            // --- Theme Toggle ---
            const themeToggle = document.getElementById('theme-toggle');
            const currentTheme = localStorage.getItem('theme');
            if (currentTheme === 'dark') {
                document.body.classList.add('dark-theme');
            }
            themeToggle?.addEventListener('click', () => {
                document.body.classList.toggle('dark-theme');
                let theme = document.body.classList.contains('dark-theme') ? 'dark' : 'light';
                localStorage.setItem('theme', theme);
            });

            // --- NEW Scrolling Features Animation ---
            const scrollFeatureSection = document.getElementById('scrolling-features');
            const scrollWrapper = document.getElementById('scroll-wrapper');
            const scrollContainer = scrollFeatureSection?.querySelector('.scroll-container');
            const scrollTriggers = scrollFeatureSection?.querySelectorAll('.scroll-trigger');
            const contentTexts = scrollFeatureSection?.querySelectorAll('.content-text');
            const contentImages = scrollFeatureSection?.querySelectorAll('.content-image');
            const progressDots = scrollFeatureSection?.querySelectorAll('.progress-dot');
            const overlay = document.getElementById('dimming-overlay');

            // Check if all required elements exist
            if (!scrollWrapper || !scrollContainer || !scrollTriggers || !contentTexts || !contentImages || !progressDots || !overlay) {
                console.error("Scrolling feature elements not found. Aborting setup.");
                return;
            }

            let headerHeight = 70; // Default, will recalculate

            // Group content elements by index for easier access
            const textGroups = {};
            contentTexts.forEach(text => textGroups[text.getAttribute('data-index')] = text);
            const imageGroups = {};
            contentImages.forEach(img => imageGroups[img.getAttribute('data-index')] = img);

            // Set initial wrapper height and trigger positions
            function setScrollHeight() {
                if (window.innerWidth > 768) { // Only run on non-mobile
                    const header = document.querySelector('.main-header');
                    headerHeight = header ? header.offsetHeight : 70;
                    const triggerHeight = window.innerHeight; // Each trigger section is viewport height
                    const totalTriggers = scrollTriggers.length;
                    const wrapperHeight = triggerHeight * totalTriggers;
                    scrollWrapper.style.height = `${wrapperHeight}px`;

                    scrollTriggers.forEach((trigger, index) => {
                        trigger.style.position = 'absolute';
                        trigger.style.top = `${index * triggerHeight}px`;
                        trigger.style.height = `${triggerHeight}px`;
                        trigger.style.width = '100%'; // Ensure full width
                    });
                } else {
                    // Reset height on mobile if needed
                    scrollWrapper.style.height = 'auto';
                }
            }

            // Update active content based on index
            function updateActiveContent(activeIndex) {
                // Update text visibility
                Object.entries(textGroups).forEach(([index, textEl]) => {
                    textEl.classList.toggle('visible', index === activeIndex);
                });
                // Update image visibility
                Object.entries(imageGroups).forEach(([index, imgEl]) => {
                    imgEl.classList.toggle('visible', index === activeIndex);
                });
                // Update progress dots
                progressDots.forEach(dot => {
                    dot.classList.toggle('active', dot.getAttribute('data-index') === activeIndex);
                });
            }

            // Set up Intersection Observer for triggers
            const triggerOptions = {
                root: null, // Use viewport
                rootMargin: `-${headerHeight + 40}px 0px -${window.innerHeight - headerHeight - 60}px 0px`, // Trigger roughly in the middle of the sticky area
                threshold: 0 // Trigger as soon as it enters the margin
            };

            const triggerObserver = new IntersectionObserver((entries) => {
                if (window.innerWidth <= 768) return; // Don't observe on mobile

                let intersectingEntry = null;
                // Find the entry that is most 'intersecting' or the first one if multiple are
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        if (!intersectingEntry || entry.intersectionRatio > intersectingEntry.intersectionRatio) {
                            intersectingEntry = entry;
                        }
                    }
                });

                if (intersectingEntry) {
                    const index = intersectingEntry.target.getAttribute('data-index');
                    updateActiveContent(index);
                }
            }, triggerOptions);

            // Set up observer for sticky container visibility (for dimming)
            const containerOptions = {
                root: null,
                rootMargin: '0px',
                threshold: Array.from({ length: 21 }, (_, i) => i * 0.05) // Fine-grained thresholds
            };

            const containerObserver = new IntersectionObserver((entries) => {
                // Always keep opacity at 0 to disable dimming effect
                overlay.style.opacity = 0;
            }, containerOptions);

            // Initialize observers and calculations
            if (window.innerWidth > 768) {
                scrollTriggers.forEach(trigger => triggerObserver.observe(trigger));
                containerObserver.observe(scrollContainer);
            }

            // Handle clicking on progress dots
            progressDots.forEach(dot => {
                dot.addEventListener('click', () => {
                    if (window.innerWidth <= 768) return; // Disable on mobile
                    const index = parseInt(dot.getAttribute('data-index'), 10);
                    // Calculate target scroll position: top of wrapper + index * viewport height
                    const wrapperTop = scrollWrapper.offsetTop;
                    const targetScrollY = wrapperTop + (index * window.innerHeight);

                    window.scrollTo({
                        top: targetScrollY - headerHeight, // Adjust for fixed header
                        behavior: 'smooth'
                    });
                });
            });

            // Debounced resize handler
            let resizeTimeout;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(() => {
                    setScrollHeight();
                    // Re-observe if needed, especially if switching between mobile/desktop
                    triggerObserver.disconnect();
                    containerObserver.disconnect();
                    if (window.innerWidth > 768) {
                        scrollTriggers.forEach(trigger => triggerObserver.observe(trigger));
                        containerObserver.observe(scrollContainer);
                    } else {
                        // Reset mobile state
                        overlay.style.opacity = 0;
                        contentTexts.forEach(t => t.classList.add('visible')); // Show all text on mobile
                        contentImages.forEach(i => i.classList.add('visible')); // Show all images on mobile
                    }
                }, 150);
            });

            // Initial setup
            setScrollHeight();
            updateActiveContent('0'); // Start with first item active

            // Initial mobile state check
            if (window.innerWidth <= 768) {
                contentTexts.forEach(t => t.classList.add('visible'));
                contentImages.forEach(i => i.classList.add('visible'));
            }
        }); // End DOMContentLoaded
    </script>
<!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script type="module" src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <!-- Add SDKs for Firebase products you want to use -->
    <!-- https://firebase.google.com/docs/web/setup#available-libraries -->
    <!-- Example: Add the Auth SDK -->
    <!-- <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js"></script> -->
    <!-- Example: Add the Firestore SDK -->
    <!-- <script type="module" src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script> -->
    <script type="module" src="/scripts/config.js"></script>
    <script type="module" src="/scripts/firebase.js"></script>
    <script type="module" src="/scripts/app.js"></script>
    <script src="/scripts/landing.js"></script> <!-- Keep landing.js as regular script unless it uses modules -->
    <script src="/scripts/advanced-animations.js"></script> <!-- Re-enabled script for advanced animations -->

</body>
</html>